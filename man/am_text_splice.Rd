% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/objects.R
\name{am_text_splice}
\alias{am_text_splice}
\title{Splice text in a text object}
\usage{
am_text_splice(doc, text_obj, pos, del_count, text)
}
\arguments{
\item{doc}{An Automerge document}

\item{text_obj}{An Automerge text object ID}

\item{pos}{Character position to start splice (0-based, counts Unicode code points)}

\item{del_count}{Number of characters to delete (counts Unicode code points)}

\item{text}{Text to insert}
}
\value{
The document \code{doc} (invisibly, for chaining)
}
\description{
Insert or delete characters in a text object. This is the primary way to
edit text CRDT objects.
}
\details{
Text positions use character (Unicode code point) indexing, matching R's
\code{substr()} and \code{nchar()} behavior. For example, in "HelloðŸ˜€", the emoji
is at position 5 (as a single character), not byte offset 5-8.

This means \code{nchar("ðŸ˜€")} returns 1, and you can use that directly in
text operations without needing to calculate byte offsets.
}
\examples{
doc <- am_create()
text_obj <- am_put(doc, AM_ROOT, "doc", am_text("Hello"))

# Insert " World" at position 5 (after "Hello")
am_text_splice(doc, text_obj$obj_id, 5, 0, " World")

# Get the full text
am_text_get(doc, text_obj$obj_id)  # "Hello World"

# Works naturally with multibyte characters
text_obj2 <- am_put(doc, AM_ROOT, "emoji", am_text(""))
am_text_splice(doc, text_obj2$obj_id, 0, 0, "HelloðŸ˜€")
# Position 5 is the emoji (character index, not bytes)
am_text_splice(doc, text_obj2$obj_id, 6, 0, "World")
am_text_get(doc, text_obj2$obj_id)  # "HelloðŸ˜€World"
}
