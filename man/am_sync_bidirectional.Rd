% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sync.R
\name{am_sync_bidirectional}
\alias{am_sync_bidirectional}
\title{Bidirectional synchronization}
\usage{
am_sync_bidirectional(doc1, doc2, max_rounds = 100)
}
\arguments{
\item{doc1}{First Automerge document}

\item{doc2}{Second Automerge document}

\item{max_rounds}{Maximum number of message exchange rounds (default: 100).
If this limit is reached, an error is raised.}
}
\value{
A list with components:
\describe{
\item{doc1}{The first document (updated with changes from doc2)}
\item{doc2}{The second document (updated with changes from doc1)}
\item{rounds}{Number of sync rounds completed}
\item{converged}{Logical indicating if sync converged successfully}
}
}
\description{
Automatically synchronizes two documents by exchanging messages until
they converge to the same state. This is a high-level convenience function
that handles the entire sync protocol automatically.
}
\details{
The function exchanges sync messages back and forth between the two documents
until both sides report no more messages to send (\code{am_sync_encode()} returns \code{NULL}).
A maximum number of rounds prevents infinite loops in case of errors.
}
\examples{
# Create two documents with different changes
doc1 <- am_create()
doc2 <- am_create()

# Make changes in each document
am_put(doc1, AM_ROOT, "x", 1)
am_put(doc2, AM_ROOT, "y", 2)

# Synchronize them
result <- am_sync_bidirectional(doc1, doc2)
cat("Synced in", result$rounds, "rounds\n")

# Now both documents have both x and y
}
