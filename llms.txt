# automerge

> Conflict-free data synchronization for R

`automerge` brings [Automerge](https://automerge.org/) CRDTs
(Conflict-free Replicated Data Types) to R, enabling automatic merging
of concurrent changes across distributed systems without conflicts. Work
offline, collaborate in real-time, or sync across platforms—changes
merge automatically.

## Why Automerge?

Traditional approaches to distributed data either require a central
server to coordinate changes or force developers to write complex
conflict resolution logic. Automerge’s CRDT technology automatically
merges concurrent changes with mathematical guarantees, eliminating the
need for coordination and making distributed systems dramatically
simpler.

## Quick Example

``` r
library(automerge)

# Two researchers working independently
alice <- am_create()
alice$experiment <- "trial_001"
alice$temperature <- 23.5
am_commit(alice, "Alice's data")

bob <- am_create()
bob$experiment <- "trial_002"
bob$humidity <- 65
am_commit(bob, "Bob's data")

# Later, sync with zero conflicts
am_sync(alice, bob)
alice
#> <Automerge Document>
#> Actor: f13c3435c37f00870ad5006bd804566d 
#> Root keys: 3 
#> Keys: experiment, humidity, temperature
bob
#> <Automerge Document>
#> Actor: 492d96612922d06aa4ca653d14f3bb0a 
#> Root keys: 3 
#> Keys: experiment, humidity, temperature
```

## Key Features

- **Familiar R syntax**: Work with CRDT documents like regular R lists
- **Rich data types**: Maps, lists, text objects, counters, and
  timestamps
- **Collaborative text editing**: Cursors and marks for rich text
  applications
- **Bidirectional sync**: High-level
  [`am_sync()`](http://shikokuchuo.net/automerge-r/reference/am_sync.md)
  or low-level protocol access
- **Offline-first**: Make changes offline, merge when connected
- **Cross-platform**: Interoperates with JavaScript and other Automerge
  implementations
- **Zero dependencies**: Only base R required at runtime

## Installation

``` r
install.packages("automerge", repos = "https://shikokuchuo.r-universe.dev")
```

Building from source requires Rust \>= 1.89.0
([rustup.rs](https://rustup.rs/)) and CMake \>= 3.25 (included in
Rtools43+ on Windows).

## Documentation

- [Getting
  Started](https://shikokuchuo.net/automerge-r/articles/automerge.html):
  Introduction and basic usage
- [Quick
  Reference](https://shikokuchuo.net/automerge-r/articles/very-quick-reference.html):
  Function reference organized by task
- [CRDT
  Concepts](https://shikokuchuo.net/automerge-r/articles/crdt-concepts.html):
  Understanding conflict-free data types
- [Sync
  Protocol](https://shikokuchuo.net/automerge-r/articles/sync-protocol.html):
  Low-level synchronization details
- [Function
  Reference](https://shikokuchuo.net/automerge-r/reference/index.html):
  Complete API documentation

## Status

**Under Active Development**: This package is in initial development and
functionality may change at any time

## External Resources

- [Automerge Website](https://automerge.org/) - Official Automerge
  documentation and guides
- [Automerge GitHub](https://github.com/automerge/automerge) - Automerge
  source code
- [Local-first software](https://www.inkandswitch.com/local-first/) -
  The philosophy behind Automerge

## License

MIT License. See [LICENSE](http://shikokuchuo.net/automerge-r/LICENSE)
for details. This package includes the
[automerge-c](https://github.com/automerge/automerge) library (also MIT
licensed)

# Package index

## All functions

- [`am_apply_changes()`](http://shikokuchuo.net/automerge-r/reference/am_apply_changes.md)
  : Apply changes to a document
- [`am_commit()`](http://shikokuchuo.net/automerge-r/reference/am_commit.md)
  : Commit pending changes
- [`am_counter()`](http://shikokuchuo.net/automerge-r/reference/am_counter.md)
  : Create an Automerge counter
- [`am_counter_increment()`](http://shikokuchuo.net/automerge-r/reference/am_counter_increment.md)
  : Increment a counter value
- [`am_create()`](http://shikokuchuo.net/automerge-r/reference/am_create.md)
  : Create a new Automerge document
- [`am_cursor()`](http://shikokuchuo.net/automerge-r/reference/am_cursor.md)
  : Create a cursor at a position in a text object
- [`am_cursor_position()`](http://shikokuchuo.net/automerge-r/reference/am_cursor_position.md)
  : Get the current position of a cursor
- [`am_delete()`](http://shikokuchuo.net/automerge-r/reference/am_delete.md)
  : Delete a key from a map or element from a list
- [`am_delete_path()`](http://shikokuchuo.net/automerge-r/reference/am_delete_path.md)
  : Delete value at path
- [`am_fork()`](http://shikokuchuo.net/automerge-r/reference/am_fork.md)
  : Fork an Automerge document
- [`am_get()`](http://shikokuchuo.net/automerge-r/reference/am_get.md) :
  Get a value from an Automerge map or list
- [`am_get_actor()`](http://shikokuchuo.net/automerge-r/reference/am_get_actor.md)
  : Get the actor ID of a document
- [`am_get_actor_hex()`](http://shikokuchuo.net/automerge-r/reference/am_get_actor_hex.md)
  : Get the actor ID as a hex string
- [`am_get_change_by_hash()`](http://shikokuchuo.net/automerge-r/reference/am_get_change_by_hash.md)
  : Get a specific change by its hash
- [`am_get_changes()`](http://shikokuchuo.net/automerge-r/reference/am_get_changes.md)
  : Get changes since specified heads
- [`am_get_changes_added()`](http://shikokuchuo.net/automerge-r/reference/am_get_changes_added.md)
  : Get changes in one document that are not in another
- [`am_get_heads()`](http://shikokuchuo.net/automerge-r/reference/am_get_heads.md)
  : Get the current heads of a document
- [`am_get_history()`](http://shikokuchuo.net/automerge-r/reference/am_get_history.md)
  : Get document history
- [`am_get_last_local_change()`](http://shikokuchuo.net/automerge-r/reference/am_get_last_local_change.md)
  : Get the last change made by the local actor
- [`am_get_path()`](http://shikokuchuo.net/automerge-r/reference/am_get_path.md)
  : Navigate deep structures with path
- [`am_insert()`](http://shikokuchuo.net/automerge-r/reference/am_insert.md)
  : Insert a value into an Automerge list
- [`am_keys()`](http://shikokuchuo.net/automerge-r/reference/am_keys.md)
  : Get all keys from an Automerge map
- [`am_length()`](http://shikokuchuo.net/automerge-r/reference/am_length.md)
  : Get the length of an Automerge map or list
- [`am_list()`](http://shikokuchuo.net/automerge-r/reference/am_list.md)
  : Create an Automerge list
- [`am_load()`](http://shikokuchuo.net/automerge-r/reference/am_load.md)
  : Load an Automerge document from binary format
- [`am_map()`](http://shikokuchuo.net/automerge-r/reference/am_map.md) :
  Create an Automerge map
- [`am_mark_create()`](http://shikokuchuo.net/automerge-r/reference/am_mark_create.md)
  : Create a mark on a text range
- [`am_marks()`](http://shikokuchuo.net/automerge-r/reference/am_marks.md)
  : Get all marks in a text object
- [`am_marks_at()`](http://shikokuchuo.net/automerge-r/reference/am_marks_at.md)
  : Get marks at a specific position
- [`am_merge()`](http://shikokuchuo.net/automerge-r/reference/am_merge.md)
  : Merge changes from another document
- [`am_put()`](http://shikokuchuo.net/automerge-r/reference/am_put.md) :
  Put a value into an Automerge map or list
- [`am_put_path()`](http://shikokuchuo.net/automerge-r/reference/am_put_path.md)
  : Set value at path
- [`am_rollback()`](http://shikokuchuo.net/automerge-r/reference/am_rollback.md)
  : Roll back pending operations
- [`am_save()`](http://shikokuchuo.net/automerge-r/reference/am_save.md)
  : Save an Automerge document to binary format
- [`am_set_actor()`](http://shikokuchuo.net/automerge-r/reference/am_set_actor.md)
  : Set the actor ID of a document
- [`am_sync()`](http://shikokuchuo.net/automerge-r/reference/am_sync.md)
  : Bidirectional synchronization
- [`am_sync_decode()`](http://shikokuchuo.net/automerge-r/reference/am_sync_decode.md)
  : Receive and apply a sync message
- [`am_sync_encode()`](http://shikokuchuo.net/automerge-r/reference/am_sync_encode.md)
  : Generate a sync message
- [`am_sync_state_new()`](http://shikokuchuo.net/automerge-r/reference/am_sync_state_new.md)
  : Create a new sync state
- [`am_text()`](http://shikokuchuo.net/automerge-r/reference/am_text.md)
  : Create an Automerge text object
- [`am_text_get()`](http://shikokuchuo.net/automerge-r/reference/am_text_get.md)
  : Get text from a text object
- [`am_text_splice()`](http://shikokuchuo.net/automerge-r/reference/am_text_splice.md)
  : Splice text in a text object
- [`am_values()`](http://shikokuchuo.net/automerge-r/reference/am_values.md)
  : Get all values from a map or list
- [`as.list(`*`<am_doc>`*`)`](http://shikokuchuo.net/automerge-r/reference/as.list.am_doc.md)
  : Convert document root to R list
- [`as_automerge()`](http://shikokuchuo.net/automerge-r/reference/as_automerge.md)
  : Convert R list to Automerge document
- [`AM_ROOT`](http://shikokuchuo.net/automerge-r/reference/automerge-constants.md)
  [`AM_OBJ_TYPE_LIST`](http://shikokuchuo.net/automerge-r/reference/automerge-constants.md)
  [`AM_OBJ_TYPE_MAP`](http://shikokuchuo.net/automerge-r/reference/automerge-constants.md)
  [`AM_OBJ_TYPE_TEXT`](http://shikokuchuo.net/automerge-r/reference/automerge-constants.md)
  [`AM_MARK_EXPAND_NONE`](http://shikokuchuo.net/automerge-r/reference/automerge-constants.md)
  [`AM_MARK_EXPAND_BEFORE`](http://shikokuchuo.net/automerge-r/reference/automerge-constants.md)
  [`AM_MARK_EXPAND_AFTER`](http://shikokuchuo.net/automerge-r/reference/automerge-constants.md)
  [`AM_MARK_EXPAND_BOTH`](http://shikokuchuo.net/automerge-r/reference/automerge-constants.md)
  : Automerge Constants
- [`` `[[`( ``*`<am_doc>`*`)`](http://shikokuchuo.net/automerge-r/reference/extract-am_doc.md)
  [`` `$`( ``*`<am_doc>`*`)`](http://shikokuchuo.net/automerge-r/reference/extract-am_doc.md)
  : Extract from Automerge document root
- [`` `[[`( ``*`<am_object>`*`)`](http://shikokuchuo.net/automerge-r/reference/extract-am_object.md)
  [`` `$`( ``*`<am_object>`*`)`](http://shikokuchuo.net/automerge-r/reference/extract-am_object.md)
  : Extract from Automerge object
- [`from_automerge()`](http://shikokuchuo.net/automerge-r/reference/from_automerge.md)
  : Convert Automerge document to R list
- [`length(`*`<am_doc>`*`)`](http://shikokuchuo.net/automerge-r/reference/length.am_doc.md)
  : Get length of document root
- [`length(`*`<am_object>`*`)`](http://shikokuchuo.net/automerge-r/reference/length.am_object.md)
  : Get length of Automerge object
- [`names(`*`<am_doc>`*`)`](http://shikokuchuo.net/automerge-r/reference/names.am_doc.md)
  : Get names from document root
- [`names(`*`<am_map>`*`)`](http://shikokuchuo.net/automerge-r/reference/names.am_map.md)
  : Get names from Automerge map object
- [`print(`*`<am_counter>`*`)`](http://shikokuchuo.net/automerge-r/reference/print.am_counter.md)
  : Print Automerge counter
- [`print(`*`<am_cursor>`*`)`](http://shikokuchuo.net/automerge-r/reference/print.am_cursor.md)
  : Print Automerge cursor
- [`print(`*`<am_doc>`*`)`](http://shikokuchuo.net/automerge-r/reference/print.am_doc.md)
  : Print Automerge document
- [`print(`*`<am_list>`*`)`](http://shikokuchuo.net/automerge-r/reference/print.am_list.md)
  : Print Automerge list object
- [`print(`*`<am_map>`*`)`](http://shikokuchuo.net/automerge-r/reference/print.am_map.md)
  : Print Automerge map object
- [`print(`*`<am_object>`*`)`](http://shikokuchuo.net/automerge-r/reference/print.am_object.md)
  : Print Automerge object (fallback for unknown types)
- [`print(`*`<am_syncstate>`*`)`](http://shikokuchuo.net/automerge-r/reference/print.am_syncstate.md)
  : Print Automerge sync state
- [`print(`*`<am_text>`*`)`](http://shikokuchuo.net/automerge-r/reference/print.am_text.md)
  : Print Automerge text object
- [`` `[[<-`( ``*`<am_doc>`*`)`](http://shikokuchuo.net/automerge-r/reference/replace-am_doc.md)
  [`` `$<-`( ``*`<am_doc>`*`)`](http://shikokuchuo.net/automerge-r/reference/replace-am_doc.md)
  : Replace in Automerge document root
- [`` `[[<-`( ``*`<am_object>`*`)`](http://shikokuchuo.net/automerge-r/reference/replace-am_object.md)
  [`` `$<-`( ``*`<am_object>`*`)`](http://shikokuchuo.net/automerge-r/reference/replace-am_object.md)
  : Replace in Automerge object

# Articles

### All vignettes

- [Getting Started with
  automerge](http://shikokuchuo.net/automerge-r/articles/automerge.md):
- [Understanding CRDTs in
  Automerge](http://shikokuchuo.net/automerge-r/articles/crdt-concepts.md):
- [Synchronization
  Protocol](http://shikokuchuo.net/automerge-r/articles/sync-protocol.md):
- [Quick
  Reference](http://shikokuchuo.net/automerge-r/articles/very-quick-reference.md):
